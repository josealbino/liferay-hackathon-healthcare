{"version":3,"sources":["HTML2IncDom.js"],"names":["parser_","HTML2IncDom","html","run","window","HTMLParser","getParser","start","tag","attrs","unary","fn","IncrementalDOM","elementVoid","elementOpen","args","i","length","push","name","value","apply","end","elementClose","chars","text","newParser"],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,KAAIA,OAAJ;;KAEMC,W;;;;;;;2BAQUC,I,EAAM;AACpB,WAAO;AAAA,YAAMD,YAAYE,GAAZ,CAAgBD,IAAhB,CAAN;AAAA,KAAP;AACA;;;+BAMkB;AAClB,WAAOF,WAAWI,OAAOC,UAAzB;AACA;;;uBAMUH,I,EAAM;AAChBD,gBAAYK,SAAZ,GAAwBJ,IAAxB,EAA8B;AAC7BK,YAAO,eAASC,GAAT,EAAcC,KAAd,EAAqBC,KAArB,EAA4B;AAClC,UAAIC,KAAKD,QAAQE,eAAeC,WAAvB,GAAqCD,eAAeE,WAA7D;AACA,UAAIC,OAAO,CACVP,GADU,EAEV,IAFU,EAGV,EAHU,CAAX;AAKA,WAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAIP,MAAMQ,MAA1B,EAAkCD,GAAlC,EAAuC;AACtCD,YAAKG,IAAL,CAAUT,MAAMO,CAAN,EAASG,IAAnB,EAAyBV,MAAMO,CAAN,EAASI,KAAlC;AACA;AACDT,SAAGU,KAAH,CAAS,IAAT,EAAeN,IAAf;AACA,MAZ4B;;AAc7BO,UAAK,aAASd,GAAT,EAAc;AAClBI,qBAAeW,YAAf,CAA4Bf,GAA5B;AACA,MAhB4B;;AAkB7BgB,YAAO,eAASC,IAAT,EAAe;AACrBb,qBAAea,IAAf,CAAoBA,IAApB;AACA;AApB4B,KAA9B;AAsBA;;;6BAWgBC,S,EAAW;AAC3B1B,cAAU0B,SAAV;AACA;;;;;;mBAGazB,W","file":"HTML2IncDom.js","sourcesContent":["'use strict';\n\nimport unescape from './unescape';\n\nvar parser_;\n\nclass HTML2IncDom {\n\t/**\n\t * Should convert the given html string to a function with calls to\n\t * incremental dom methods.\n\t * @param {string} html\n\t * @return {!function()} Function with incremental dom calls for building\n\t *     the given html string.\n\t */\n\tstatic buildFn(html) {\n\t\treturn () => HTML2IncDom.run(html);\n\t}\n\n\t/**\n\t * Gets the html parser being currently used.\n\t * @return {!function()}\n\t */\n\tstatic getParser() {\n\t\treturn parser_ || window.HTMLParser;\n\t}\n\n\t/**\n\t * Should convert the given html string to calls to incremental dom methods.\n\t * @param {string} html\n\t */\n\tstatic run(html) {\n\t\tHTML2IncDom.getParser()(html, {\n\t\t\tstart: function(tag, attrs, unary) {\n\t\t\t\tvar fn = unary ? IncrementalDOM.elementVoid : IncrementalDOM.elementOpen;\n\t\t\t\tvar args = [\n\t\t\t\t\ttag,\n\t\t\t\t\tnull,\n\t\t\t\t\t[]\n\t\t\t\t];\n\t\t\t\tfor (var i = 0; i < attrs.length; i++) {\n\t\t\t\t\targs.push(attrs[i].name, attrs[i].value);\n\t\t\t\t}\n\t\t\t\tfn.apply(null, args);\n\t\t\t},\n\n\t\t\tend: function(tag) {\n\t\t\t\tIncrementalDOM.elementClose(tag);\n\t\t\t},\n\n\t\t\tchars: function(text) {\n\t\t\t\tIncrementalDOM.text(text, unescape);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Changes the function that will be used to parse html strings. By default\n\t * this will use the `HTMLParser` function from\n\t * https://github.com/blowsie/Pure-JavaScript-HTML5-Parser. This will accept\n\t * any function that follows that same api, basically accepting the html\n\t * string and an object with `start`, `end` and `chars` functions to be called\n\t * during the parsing.\n\t * @param {!function(string, !Object} newParser\n\t */\n\tstatic setParser(newParser) {\n\t\tparser_ = newParser;\n\t}\n}\n\nexport default HTML2IncDom;\n"]}