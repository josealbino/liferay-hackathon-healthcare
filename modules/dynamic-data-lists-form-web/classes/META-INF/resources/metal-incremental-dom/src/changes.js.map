{"version":3,"sources":["changes.js"],"names":["clearChanges","getChanges","trackChanges","data","changes","handleStateKeyChanged_","eventData","type","key","component","on","bind"],"mappings":";AAAA;;;;;UAQgBA,Y,GAAAA,Y;UAuBAC,U,GAAAA,U;UAQAC,Y,GAAAA,Y;;;AAnChB;;;;AAIO,WAASF,YAAT,CAAsBG,IAAtB,EAA4B;AAClCA,SAAKC,OAAL,GAAe,IAAf;AACA;;AAED;;;;;;AAMA,WAASC,sBAAT,CAAgCF,IAAhC,EAAsCG,SAAtC,EAAiD;AAChDH,SAAKC,OAAL,GAAeD,KAAKC,OAAL,IAAgB,EAA/B;AACA,QAAMG,OAAOD,UAAUC,IAAV,IAAkB,OAA/B;AACAJ,SAAKC,OAAL,CAAaG,IAAb,IAAqBJ,KAAKC,OAAL,CAAaG,IAAb,KAAsB,EAA3C;AACAJ,SAAKC,OAAL,CAAaG,IAAb,EAAmBD,UAAUE,GAA7B,IAAoCF,SAApC;AACA;;AAED;;;;;;AAMO,WAASL,UAAT,CAAoBQ,SAApB,EAA+B;AACrC,WAAO,mBAAQA,SAAR,EAAmBL,OAA1B;AACA;;AAED;;;;AAIO,WAASF,YAAT,CAAsBO,SAAtB,EAAiC;AACvC,QAAMN,OAAO,mBAAQM,SAAR,CAAb;AACAA,cAAUC,EAAV,CAAa,iBAAb,EAAgCL,uBAAuBM,IAAvB,CAA4B,IAA5B,EAAkCR,IAAlC,CAAhC;AACA","file":"changes.js","sourcesContent":["'use strict';\n\nimport { getData } from './data';\n\n/**\n * Clears the changes tracked so far.\n * @param {!Object} data\n */\nexport function clearChanges(data) {\n\tdata.changes = null;\n}\n\n/**\n * Handles the `stateKeyChanged` event from a component. Stores change data.\n * @param {!Object} data\n * @param {!Object} eventData\n * @private\n */\nfunction handleStateKeyChanged_(data, eventData) {\n\tdata.changes = data.changes || {};\n\tconst type = eventData.type || 'props';\n\tdata.changes[type] = data.changes[type] || {};\n\tdata.changes[type][eventData.key] = eventData;\n}\n\n/**\n * Returns an object with changes in the given component since the last time,\n * or null if there weren't any.\n * @param {!Component} component\n * @return {Object}\n */\nexport function getChanges(component) {\n\treturn getData(component).changes;\n}\n\n/**\n * Starts tracking changes for the given component\n * @param {!Component} component\n */\nexport function trackChanges(component) {\n\tconst data = getData(component);\n\tcomponent.on('stateKeyChanged', handleStateKeyChanged_.bind(null, data));\n}\n"]}